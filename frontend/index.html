<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Embiggen Your Eyes - NASA Space Apps Challenge 2025</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    
    <!-- SF Symbols / System Icons Fallback -->
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&family=SF+Pro:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Map Container -->
    <div id="map"></div>
    
    <!-- Floating Action Buttons -->
    <div id="floating-buttons" class="floating-buttons">
        <button class="floating-btn" id="floating-btn-bodies" title="Explore Subjects">
            <span class="material-icons-round">public</span>
            <span class="floating-btn-label">Explore</span>
        </button>
        <button class="floating-btn" id="floating-btn-overlay" title="Overlay Layers">
            <span class="material-icons-round">filter_none</span>
            <span class="floating-btn-label">Overlay</span>
        </button>
        <button class="floating-btn" id="floating-btn-compare" title="Compare">
            <span class="material-icons-round">compare</span>
            <span class="floating-btn-label">Compare</span>
        </button>
        <button class="floating-btn" id="floating-btn-tools" title="Tools">
            <span class="material-icons-round">draw</span>
            <span class="floating-btn-label">Tools</span>
        </button>
    </div>
    
    <!-- iOS-style Bottom Sheet Control Panel -->
    <div id="control-sheet" class="bottom-sheet hidden">
        <div class="sheet-handle" id="sheet-handle">
            <div class="handle-bar"></div>
        </div>
        
        <div class="sheet-content">
            <!-- Tab Navigation -->
            <div class="sheet-tabs">
                <button class="sheet-tab" id="tab-bodies" title="Explore Subjects">
                    <span class="material-icons-round">public</span>
                    <span class="tab-label">Explore</span>
                </button>
                <button class="sheet-tab" id="tab-overlay" title="Overlay Layers">
                    <span class="material-icons-round">filter_none</span>
                    <span class="tab-label">Overlay</span>
                </button>
                <button class="sheet-tab" id="tab-compare" title="Compare">
                    <span class="material-icons-round">compare</span>
                    <span class="tab-label">Compare</span>
                </button>
                <button class="sheet-tab" id="tab-tools" title="Tools">
                    <span class="material-icons-round">draw</span>
                    <span class="tab-label">Tools</span>
                </button>
            </div>
            
            <!-- Dynamic Content Area -->
            <div class="sheet-main" id="sheet-main">
                <!-- Default: Categories & Subjects Explorer -->
                <div class="content-panel active" id="panel-bodies">
                    <h3 class="panel-title">Explore</h3>
                    <div class="explore-desc">Browse by category and subject</div>
                    <div id="categories-list" class="categories-list">
                        <!-- Dynamically populated -->
                    </div>
                </div>
                
                <!-- Datasets Panel -->
                <div class="content-panel" id="panel-layers">
                    <div class="panel-header">
                        <h3 class="panel-title">Datasets</h3>
                        <div class="panel-breadcrumb" id="dataset-breadcrumb"></div>
                    </div>
                    <div id="layers-list" class="layers-list"></div>
                    
                    <!-- Variant Selector (shown when dataset selected) -->
                    <div class="variant-section hidden" id="variant-section">
                        <label class="input-label">Visualization</label>
                        <div id="variant-selector" class="variant-grid"></div>
                    </div>
                    
                    <!-- Date Picker (shown for time-series datasets) -->
                    <div class="date-picker-section hidden" id="date-section">
                        <label class="input-label">
                            <span class="material-icons-round" style="font-size: 16px; vertical-align: middle; margin-right: 4px;">event</span>
                            Date 
                            <span class="date-range-info" id="date-range-info"></span>
                        </label>
                        
                        <!-- Quick date buttons -->
                        <div class="date-quick-actions" id="date-quick-actions">
                            <button class="date-quick-btn" data-offset="0" title="Today">Today</button>
                            <button class="date-quick-btn" data-offset="-1" title="Yesterday">-1d</button>
                            <button class="date-quick-btn" data-offset="-7" title="1 week ago">-1w</button>
                            <button class="date-quick-btn" data-offset="-30" title="1 month ago">-1m</button>
                        </div>
                        
                        <!-- Date input with wrapper for better styling -->
                        <div class="date-input-wrapper">
                            <span class="material-icons-round date-icon">calendar_today</span>
                            <input type="date" id="date-picker" class="glass-input date-input" />
                        </div>
                    </div>
                </div>
                
                <!-- Overlay Panel -->
                <div class="content-panel" id="panel-overlay">
                    <h3 class="panel-title">Layer Overlay</h3>
                    <p class="panel-desc">Add multiple layers from the same celestial body</p>
                    <div id="overlay-layers" class="overlay-layers">
                        <!-- Base layer -->
                        <div class="overlay-item base-layer">
                            <span class="material-icons-round">layers</span>
                            <div class="overlay-info">
                                <div class="overlay-name">Base Layer</div>
                                <div class="overlay-desc" id="base-layer-name">Select a layer</div>
                            </div>
                        </div>
                    </div>
                    <button class="glass-button" id="btn-add-overlay">
                        <span class="material-icons-round">add</span>
                        Add Overlay Layer
                    </button>
                </div>
                
                <!-- Compare Panel -->
                <div class="content-panel" id="panel-compare">
                    <h3 class="panel-title">Compare Images</h3>
                    <div class="explore-desc">Compare different datasets side by side</div>
                    <div class="compare-modes">
                        <button class="mode-btn active" data-mode="overlay">
                            <span class="material-icons-round">filter_none</span>
                            Overlay
                        </button>
                        <button class="mode-btn" data-mode="swipe">
                            <span class="material-icons-round">compare</span>
                            Swipe
                        </button>
                        <button class="mode-btn" data-mode="split">
                            <span class="material-icons-round">view_column</span>
                            Split
                        </button>
                    </div>
                    <div id="compare-images-list" class="compare-list"></div>
                </div>
                
                <!-- Collections Panel -->
                <div class="content-panel" id="panel-collections">
                    <h3 class="panel-title">Collections</h3>
                    <button class="glass-button" id="btn-new-collection">
                        <span class="material-icons-round">add</span>
                        New Collection
                    </button>
                    <div id="collections-list" class="collections-list"></div>
                </div>
                
                <!-- Tools Panel -->
                <div class="content-panel" id="panel-tools">
                    <h3 class="panel-title">Annotation Tools</h3>
                    <div class="explore-desc">Create markers and annotations on the map</div>
                    <div class="tools-grid">
                        <button class="tool-btn" id="tool-marker">
                            <span class="material-icons-round">place</span>
                            <span>Marker</span>
                        </button>
                        <button class="tool-btn" id="tool-path">
                            <span class="material-icons-round">timeline</span>
                            <span>Path</span>
                        </button>
                        <button class="tool-btn" id="tool-rectangle">
                            <span class="material-icons-round">crop_square</span>
                            <span>Rectangle</span>
                        </button>
                        <button class="tool-btn" id="tool-circle">
                            <span class="material-icons-round">circle</span>
                            <span>Circle</span>
                        </button>
                    </div>
                    <div id="annotations-list" class="annotations-list"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Floating Top Bar -->
    <div class="top-bar">
        <div class="top-bar-left">
            <img src="assets/logo.svg" alt="Embiggen Your Eyes" class="app-logo" />
        </div>
        <div class="top-bar-right">
            <!-- Desktop items - hidden on mobile -->
            <div class="status-pill desktop-only" id="status-pill">
                <div class="status-dot"></div>
                <span id="status-text">Ready</span>
            </div>
            <button class="icon-btn glass desktop-only" id="btn-suggestions" title="Smart Suggestions">
                <span class="material-icons-round">auto_awesome</span>
            </button>
            <button class="icon-btn glass desktop-only" id="btn-search" title="Search">
                <span class="material-icons-round">search</span>
            </button>
            
            <!-- Dataset button - Always visible, last on desktop, first on mobile -->
            <button class="dataset-btn glass" id="btn-dataset-dropdown" title="Dataset">
                <span class="material-icons-round">layers</span>
                <span class="dataset-btn-label" id="dataset-btn-label">Dataset</span>
                <span class="material-icons-round">expand_more</span>
            </button>
            
            <!-- Mobile burger menu - only visible on mobile -->
            <button class="icon-btn glass mobile-only" id="btn-mobile-menu" title="Menu">
                <span class="material-icons-round">menu</span>
            </button>
        </div>
    </div>
    
    <!-- Mobile Menu Dropdown -->
    <div class="mobile-menu-dropdown glass hidden" id="mobile-menu-dropdown">
        <button class="icon-btn glass" id="btn-suggestions-mobile" title="Smart Suggestions">
            <span class="material-icons-round">auto_awesome</span>
            <span class="mobile-menu-label">Smart Suggestions</span>
        </button>
        <button class="icon-btn glass" id="btn-search-mobile" title="Search">
            <span class="material-icons-round">search</span>
            <span class="mobile-menu-label">Search</span>
        </button>
        <div class="status-pill" id="status-pill-mobile">
            <div class="status-dot"></div>
            <span id="status-text-mobile">Ready</span>
        </div>
    </div>
    
    <!-- Dataset Dropdown Menu -->
    <div class="dataset-dropdown glass hidden" id="dataset-dropdown">
        <div class="dropdown-header">
            <h3 class="dropdown-title">Dataset</h3>
            <div class="panel-breadcrumb" id="dataset-breadcrumb-dropdown"></div>
        </div>
        <div id="layers-list-dropdown" class="layers-list"></div>
        
        <!-- Variant Selector -->
        <div class="variant-section hidden" id="variant-section-dropdown">
            <label class="input-label">Visualization</label>
            <div id="variant-selector-dropdown" class="variant-grid"></div>
        </div>
        
        <!-- Date Picker -->
        <div class="date-picker-section hidden" id="date-section-dropdown">
            <label class="input-label">
                <span class="material-icons-round" style="font-size: 16px; vertical-align: middle; margin-right: 4px;">event</span>
                Date 
                <span class="date-range-info" id="date-range-info-dropdown"></span>
            </label>
            
            <!-- Quick date buttons -->
            <div class="date-quick-actions" id="date-quick-actions-dropdown">
                <button class="date-quick-btn" data-offset="0" title="Today">Today</button>
                <button class="date-quick-btn" data-offset="-1" title="Yesterday">-1d</button>
                <button class="date-quick-btn" data-offset="-7" title="1 week ago">-1w</button>
                <button class="date-quick-btn" data-offset="-30" title="1 month ago">-1m</button>
            </div>
            
            <!-- Date input with wrapper -->
            <div class="date-input-wrapper">
                <span class="material-icons-round date-icon">calendar_today</span>
                <input type="date" id="date-picker-dropdown" class="glass-input date-input" />
            </div>
        </div>
        </div>
        
    <!-- Floating Map Controls -->
    <div class="map-controls">
        <button class="map-btn glass" id="btn-zoom-in" title="Zoom In">
            <span class="material-icons-round">add</span>
        </button>
        <button class="map-btn glass" id="btn-zoom-out" title="Zoom Out">
            <span class="material-icons-round">remove</span>
        </button>
        <button class="map-btn glass" id="btn-fullscreen" title="Fullscreen">
            <span class="material-icons-round">fullscreen</span>
        </button>
    </div>
    
    <!-- Info HUD -->
    <div class="info-hud glass">
        <div class="hud-item">
            <span class="material-icons-round">location_on</span>
            <span id="coordinates">0.00°, 0.00°</span>
        </div>
        <div class="hud-item">
            <span class="material-icons-round">zoom_in</span>
        <span id="zoom-level">Zoom: 2</span>
        </div>
    </div>
    
    <!-- Suggestions Popover -->
    <div class="suggestions-popover glass hidden" id="suggestions-popover">
        <h4 class="popover-title">Smart Suggestions</h4>
        <div id="suggestions-list" class="suggestions-list"></div>
    </div>
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin=""></script>
    
    <!-- Application JS -->
    <script src="app.js"></script>
    
    <!-- Attribution (hidden, for licensing compliance) -->
    <div style="display: none;">
        Icons made by Freepik, Smashicons, and iconixar from <a href="https://www.flaticon.com/">Flaticon</a>
    </div>
</body>
</html>
